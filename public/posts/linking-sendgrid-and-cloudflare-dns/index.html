<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linking Sendgrid and Cloudflare DNS | Clem SK</title>
<meta name=keywords content="dns,cloudflare,sendgrid,email"><meta name=description content="For this to make sense, I&rsquo;m assuming that you have accounts with both Cloudflare as your DNS provider and SendGrid as your email provider. If not, hopefully some of this translates or is food for thought.
This was honestly a pain in the arse, mostly because of the feedback loops for seeing if DNS has worked is measured in days and there are no good error messages other than &rsquo;not working&rsquo; in SendGrid. This leaves you guessing and trawling the internet for things to try to get it working."><meta name=author content="Clement Seconde-Kynnersley"><link rel=canonical href=https://clem-sk.dev/posts/linking-sendgrid-and-cloudflare-dns/><link crossorigin=anonymous href=/assets/css/stylesheet.986fe03b6849f98be5000b7e092db54278d597af9b7d3aba06d460674d698475.css integrity="sha256-mG/gO2hJ+YvlAAt+CS21QnjVl6+bfTq6BtRgZ01phHU=" rel="preload stylesheet" as=style><link rel=icon href=https://clem-sk.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://clem-sk.dev/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://clem-sk.dev/favicon-32x32.png><link rel=apple-touch-icon href=https://clem-sk.dev/apple-touch-icon.png><link rel=mask-icon href=https://clem-sk.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://clem-sk.dev/posts/linking-sendgrid-and-cloudflare-dns/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Linking Sendgrid and Cloudflare DNS"><meta property="og:description" content="For this to make sense, I&rsquo;m assuming that you have accounts with both Cloudflare as your DNS provider and SendGrid as your email provider. If not, hopefully some of this translates or is food for thought.
This was honestly a pain in the arse, mostly because of the feedback loops for seeing if DNS has worked is measured in days and there are no good error messages other than &rsquo;not working&rsquo; in SendGrid. This leaves you guessing and trawling the internet for things to try to get it working."><meta property="og:type" content="article"><meta property="og:url" content="https://clem-sk.dev/posts/linking-sendgrid-and-cloudflare-dns/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-19T16:38:02+01:00"><meta property="article:modified_time" content="2025-04-19T16:38:02+01:00"><meta property="og:site_name" content="ClemSK"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linking Sendgrid and Cloudflare DNS"><meta name=twitter:description content="For this to make sense, I&rsquo;m assuming that you have accounts with both Cloudflare as your DNS provider and SendGrid as your email provider. If not, hopefully some of this translates or is food for thought.
This was honestly a pain in the arse, mostly because of the feedback loops for seeing if DNS has worked is measured in days and there are no good error messages other than &rsquo;not working&rsquo; in SendGrid. This leaves you guessing and trawling the internet for things to try to get it working."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://clem-sk.dev/posts/"},{"@type":"ListItem","position":2,"name":"Linking Sendgrid and Cloudflare DNS","item":"https://clem-sk.dev/posts/linking-sendgrid-and-cloudflare-dns/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linking Sendgrid and Cloudflare DNS","name":"Linking Sendgrid and Cloudflare DNS","description":"For this to make sense, I\u0026rsquo;m assuming that you have accounts with both Cloudflare as your DNS provider and SendGrid as your email provider. If not, hopefully some of this translates or is food for thought.\nThis was honestly a pain in the arse, mostly because of the feedback loops for seeing if DNS has worked is measured in days and there are no good error messages other than \u0026rsquo;not working\u0026rsquo; in SendGrid. This leaves you guessing and trawling the internet for things to try to get it working.\n","keywords":["dns","cloudflare","sendgrid","email"],"articleBody":"For this to make sense, Iâ€™m assuming that you have accounts with both Cloudflare as your DNS provider and SendGrid as your email provider. If not, hopefully some of this translates or is food for thought.\nThis was honestly a pain in the arse, mostly because of the feedback loops for seeing if DNS has worked is measured in days and there are no good error messages other than â€™not workingâ€™ in SendGrid. This leaves you guessing and trawling the internet for things to try to get it working.\nThe reasons for needing email in my app are the typical scenarios: 1) account creation 2) password resetting 3) communication (features / changes / news).\nThe added benefit is the ability to brand links so the emails will be sent from @london-property-pulse.com. This is small but one of my favourite things to feel real / professional.\nSet up 1. Create a non-Gmail account This is something that SendGrid requires you to do. I chose Outlook, use whatever you like. What this means is that a lot of spammers use throw-away Gmail accounts and cannot be trusted with an email blaster.\n2. Verify the email You know the drill, just follow the steps SendGrid tell you to follow.\n3. Adding the SendGrid DNS records to Cloudflare This is the fun bit where you add a bunch of CNAME and a couple of TXT records, effectively hooking up SendGrid to Cloudflare. Keep in mind, when youâ€™re done it takes 1 - 2 days for changes to be registered by DNS servers. When setting these up, make sure to turn off the Cloudflare special-sauce DNS proxying (orange cloud thing). This was half the reason I wasnâ€™t seeing the DNS resolve.\nWhy Turn off DNS proxying? There are a number of reasons for this but, in a nutshell, the proxying prevents SSL cert validation on the origin server and reduces email deliverability due to the disruption of DKIM authentication. The second part means that your emails will all end up in spam folders ðŸ’©\n4. Turning on email routing in Cloudflare This was a source of frustration and something I didnâ€™t turn on until much later. I couldnâ€™t understand why the DNS wasnâ€™t propagating despite triple checking for typos and processes.\nAfter turning on this setting under the Email tab in the Cloudflare dashboard, youâ€™re asked to add several email related MX type DNS records. This is the second part of the magic to get things working. Without it your DNS server wonâ€™t process email. You need to register an email for this, I used the same email as the one used to send and receive emails in SendGrid.\nTo call it out, the issue was not due to CNAME flattening. Apparently this is an issue for some people and a setting that is not available to modify (read turn-off) for top level domains (e.g. london-property-pulse.com). It also makes no difference if your DNS server can resolve it, which apparently Cloudflare does.\nAdditional context: when setting the CNAME values, SendGrid asks you to add a CNAME host like xxx.london-property-pulse.com, on save Cloudflare shortens it to just xxx in the console, also called CNAME flattening.\nMore on that here: CNAME flattening\n5. Checking DNS is working with email There are 2 ways of doing this: 1) using the SendGrid verify button where the DNS records to configure are listed 2) using a 3rd party tool like DNSChecker.org.\nI checked about once or twice a day to see if the DNS had resolved in SendGrid and DNSChecker, and then thinking of all the possible reasons why it hadnâ€™t. Definitely land-of-confusion moments!\nThe old faithful here: DNSChecker.org\nNext steps and recommendations Iâ€™ve not tested the sending of emails, but Iâ€™m glad to be out of settings dashboards / click-ops and back into code to get the email sending working.\nI definitely recommend setting up the email DNS before you need it as it does take a while to get it working due to the slowness of propagation. Itâ€™s also something that you can do in the background while working on other things.\nThe good thing about DNS is that once itâ€™s configured itâ€™s set-and-forget!\n","wordCount":"696","inLanguage":"en","datePublished":"2025-04-19T16:38:02+01:00","dateModified":"2025-04-19T16:38:02+01:00","author":{"@type":"Person","name":"Clement Seconde-Kynnersley"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://clem-sk.dev/posts/linking-sendgrid-and-cloudflare-dns/"},"publisher":{"@type":"Organization","name":"Clem SK","logo":{"@type":"ImageObject","url":"https://clem-sk.dev/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://clem-sk.dev/ accesskey=h title="Clem SK (Alt + H)">Clem SK</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://clem-sk.dev/aboutme/ title="Start Here"><span>Start Here</span></a></li><li><a href=https://clem-sk.dev/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://clem-sk.dev/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://clem-sk.dev/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://clem-sk.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://clem-sk.dev/>Home</a>&nbsp;Â»&nbsp;<a href=https://clem-sk.dev/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Linking Sendgrid and Cloudflare DNS</h1><div class=post-meta><div class=post-meta><span title=2025-04-19T16:38:02+01:00>April 19, 2025</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;696 words&nbsp;Â·&nbsp;<strong><a href=/tags/dns/>#dns</a></strong>&nbsp;<strong><a href=/tags/cloudflare/>#cloudflare</a></strong>&nbsp;<strong><a href=/tags/sendgrid/>#sendgrid</a></strong>&nbsp;<strong><a href=/tags/email/>#email</a></strong></div></div></header><div class=post-content><p>For this to make sense, I&rsquo;m assuming that you have accounts with both <code>Cloudflare</code> as your DNS provider and <code>SendGrid</code> as your email provider. If not, hopefully some of this translates or is food for thought.</p><p>This was honestly a pain in the arse, mostly because of the feedback loops for seeing if DNS has worked is measured in <em>days</em> and there are no good error messages other than &rsquo;not working&rsquo; in SendGrid. This leaves you guessing and trawling the internet for things to try to get it working.</p><p>The reasons for needing email in my app are the typical scenarios: 1) account creation 2) password resetting 3) communication (features / changes / news).</p><p>The added benefit is the ability to brand links so the emails will be sent from <code>@london-property-pulse.com</code>. This is small but one of my favourite things to feel real / professional.</p><h3 id=set-up>Set up<a hidden class=anchor aria-hidden=true href=#set-up>#</a></h3><h4 id=1-create-a-non-gmail-account>1. Create a non-Gmail account<a hidden class=anchor aria-hidden=true href=#1-create-a-non-gmail-account>#</a></h4><p>This is something that SendGrid requires you to do. I chose Outlook, use whatever you like. What this means is that a lot of spammers use throw-away Gmail accounts and cannot be trusted with an email blaster.</p><h4 id=2-verify-the-email>2. Verify the email<a hidden class=anchor aria-hidden=true href=#2-verify-the-email>#</a></h4><p>You know the drill, just follow the steps SendGrid tell you to follow.</p><h4 id=3-adding-the-sendgrid-dns-records-to-cloudflare>3. Adding the SendGrid DNS records to Cloudflare<a hidden class=anchor aria-hidden=true href=#3-adding-the-sendgrid-dns-records-to-cloudflare>#</a></h4><p>This is the fun bit where you add a bunch of CNAME and a couple of TXT records, effectively hooking up <code>SendGrid</code> to <code>Cloudflare</code>. Keep in mind, when you&rsquo;re done it takes 1 - 2 days for changes to be registered by DNS servers.
When setting these up, make sure to turn off the Cloudflare special-sauce DNS proxying (orange cloud thing). This was half the reason I wasn&rsquo;t seeing the DNS resolve.</p><h5 id=why-turn-off-dns-proxying>Why Turn off DNS proxying?<a hidden class=anchor aria-hidden=true href=#why-turn-off-dns-proxying>#</a></h5><p>There are a number of reasons for this but, in a nutshell, the proxying prevents SSL cert validation on the origin server and reduces email deliverability due to the disruption of DKIM authentication. The second part means that your emails will all end up in spam folders ðŸ’©</p><h4 id=4-turning-on-email-routing-in-cloudflare>4. Turning on email routing in Cloudflare<a hidden class=anchor aria-hidden=true href=#4-turning-on-email-routing-in-cloudflare>#</a></h4><p>This was a source of frustration and something I didn&rsquo;t turn on until much later. I couldn&rsquo;t understand why the DNS wasn&rsquo;t propagating despite triple checking for typos and processes.</p><p>After turning on this setting under the Email tab in the Cloudflare dashboard, you&rsquo;re asked to add several email related MX type DNS records. This is the second part of the magic to get things working. Without it your DNS server won&rsquo;t process email. You need to register an email for this, I used the same email as the one used to send and receive emails in <code>SendGrid</code>.</p><p>To call it out, the issue was not due to CNAME flattening. Apparently this is an issue for some people and a setting that is not available to modify (read <em>turn-off</em>) for top level domains (e.g. <code>london-property-pulse.com</code>). It also makes no difference if your DNS server can resolve it, which apparently Cloudflare does.</p><p>Additional context: when setting the CNAME values, SendGrid asks you to add a CNAME host like <code>xxx.london-property-pulse.com</code>, on save Cloudflare shortens it to just <code>xxx</code> in the console, also called CNAME flattening.</p><p>More on that here: <a href=https://developers.cloudflare.com/dns/cname-flattening/>CNAME flattening</a></p><h4 id=5-checking-dns-is-working-with-email>5. Checking DNS is working with email<a hidden class=anchor aria-hidden=true href=#5-checking-dns-is-working-with-email>#</a></h4><p>There are 2 ways of doing this: 1) using the SendGrid verify button where the DNS records to configure are listed 2) using a 3rd party tool like DNSChecker.org.</p><p>I checked about once or twice a day to see if the DNS had resolved in <code>SendGrid</code> and <code>DNSChecker</code>, and then thinking of all the possible reasons why it hadn&rsquo;t. Definitely land-of-confusion moments!</p><p>The old faithful here: <a href=https://dnschecker.org/>DNSChecker.org</a></p><h4 id=next-steps-and-recommendations>Next steps and recommendations<a hidden class=anchor aria-hidden=true href=#next-steps-and-recommendations>#</a></h4><p>I&rsquo;ve not tested the sending of emails, but I&rsquo;m glad to be out of settings dashboards / click-ops and back into code to get the email sending working.</p><p>I definitely recommend setting up the email DNS before you need it as it does take a while to get it working due to the slowness of propagation. It&rsquo;s also something that you can do in the background while working on other things.</p><p>The good thing about DNS is that once it&rsquo;s configured it&rsquo;s set-and-forget!</p></div><footer class=post-footer><nav class=paginav><a class=next href=https://clem-sk.dev/posts/launching-a-site/><span class=title>Next Â»</span><br><span>Launching a Site</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://clem-sk.dev/>Clem SK</a></span>
<span><a href=https://creativecommons.org/licenses/by-nc-nd/4.0>CC BY-NC-ND</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>